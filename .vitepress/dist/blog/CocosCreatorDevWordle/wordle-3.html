<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>cocos creator实现wordle游戏（三） | Potato H5 Games</title>
    <meta name="description" content="Foucsing on the IMP of H5 Games">
    <meta name="generator" content="VitePress v1.3.1">
    <link rel="preload stylesheet" href="/assets/style.COpbPMcn.css" as="style">
    <script type="module" src="/assets/chunks/metadata.9551aa79.js"></script>
    <script type="module" src="/assets/app.C0a7HJei.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.COLf43Qa.js">
    <link rel="modulepreload" href="/assets/chunks/theme.dqTghBAc.js">
    <link rel="modulepreload" href="/assets/blog_CocosCreatorDevWordle_wordle-3.md.BKXmcTCh.lean.js">
    <link rel="icon" href="/potato.ico">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8732961563471855" crossorigin="anonymous"></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8291ffa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8291ffa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar has-sidebar top" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-0ad69264><a class="title" href="/" data-v-0ad69264><!--[--><!--]--><!--[--><img class="VPImage logo" src="/potato.ico" alt data-v-ab19afbb><!--]--><span data-v-0ad69264>Potato H5 Games</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-afb2845e data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>首页</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-afb2845e data-v-af5898d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-af5898d3><span class="text" data-v-af5898d3><!----><span data-v-af5898d3>博客专栏</span><span class="vpi-chevron-down text-icon" data-v-af5898d3></span></span></button><div class="menu" data-v-af5898d3><div class="VPMenu" data-v-af5898d3 data-v-20ed86d6><div class="items" data-v-20ed86d6><!--[--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-f51f088d><a class="VPLink link" href="/blog/CocosCreatorDevWordle/info.html" data-v-f51f088d><!--[-->cocos creator实现wordle游戏<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-f51f088d><a class="VPLink link" href="/blog/JSLearn/info.html" data-v-f51f088d><!--[-->JS基础教程<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-f51f088d><a class="VPLink link" href="/blog/CSSLearn/info.html" data-v-f51f088d><!--[-->CSS基础教程<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-f51f088d><a class="VPLink link" href="/blog/codeLearn/info.html" data-v-f51f088d><!--[-->开源项目学习<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-f51f088d><a class="VPLink link" href="/blog/other/info.html" data-v-f51f088d><!--[-->其他<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/tools/" tabindex="0" data-v-afb2845e data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>实用工具</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/about/about.html" tabindex="0" data-v-afb2845e data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>关于</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/aidscooler" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><a class="VPSocialLink no-icon" href="https://blog.csdn.net/aidscooler" aria-label target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="32.000000pt" height="32.000000pt" viewBox="0 0 32.000000 32.000000" preserveAspectRatio="xMidYMid meet"> <g transform="translate(0.000000,32.000000) scale(0.100000,-0.100000)" fill="#F25327" stroke="none"> <path d="M0 160 l0 -160 160 0 160 0 0 160 0 160 -160 0 -160 0 0 -160z m225 108 c24 -11 34 -41 16 -52 -4 -3 -17 1 -27 9 -43 32 -95 3 -109 -62 -5 -27 -2 -37 19 -58 29 -29 62 -32 94 -9 25 17 42 11 42 -15 0 -27 -51 -45 -107 -38 -70 8 -97 42 -91 115 4 48 10 60 41 89 39 35 76 42 122 21z"/> </g> </svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-af5898d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-af5898d3><span class="vpi-more-horizontal icon" data-v-af5898d3></span></button><div class="menu" data-v-af5898d3><div class="VPMenu" data-v-af5898d3 data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/aidscooler" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><a class="VPSocialLink no-icon" href="https://blog.csdn.net/aidscooler" aria-label target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="32.000000pt" height="32.000000pt" viewBox="0 0 32.000000 32.000000" preserveAspectRatio="xMidYMid meet"> <g transform="translate(0.000000,32.000000) scale(0.100000,-0.100000)" fill="#F25327" stroke="none"> <path d="M0 160 l0 -160 160 0 160 0 0 160 0 160 -160 0 -160 0 0 -160z m225 108 c24 -11 34 -41 16 -52 -4 -3 -17 1 -27 9 -43 32 -95 3 -109 -62 -5 -27 -2 -37 19 -58 29 -29 62 -32 94 -9 25 17 42 11 42 -15 0 -27 -51 -45 -107 -38 -70 8 -97 42 -91 115 4 48 10 60 41 89 39 35 76 42 122 21z"/> </g> </svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-883964e0><button data-v-883964e0>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible has-active" data-v-51288d80 data-v-edd2eed8><div class="item" role="button" tabindex="0" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><h2 class="text" data-v-edd2eed8>CocosCreator实现Wordle游戏</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-edd2eed8><span class="vpi-chevron-right caret-icon" data-v-edd2eed8></span></div></div><div class="items" data-v-edd2eed8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/blog/CocosCreatorDevWordle/info.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8> 概述</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/blog/CocosCreatorDevWordle/wordle-1.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8> cocos creator实现wordle游戏（一）  </p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/blog/CocosCreatorDevWordle/wordle-2.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8> cocos creator实现wordle游戏（二）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/blog/CocosCreatorDevWordle/wordle-3.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8> cocos creator实现wordle游戏（三）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/blog/CocosCreatorDevWordle/wordle-4.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8> cocos creator实现wordle游戏（四）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/blog/CocosCreatorDevWordle/wordle-5.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8> cocos creator实现wordle游戏（五）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/blog/CocosCreatorDevWordle/wordle-6.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8> cocos creator实现wordle游戏（六）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/blog/CocosCreatorDevWordle/wordle-7.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8> cocos creator实现wordle游戏（七）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/blog/CocosCreatorDevWordle/wordle-8.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8> cocos creator实现wordle游戏（八）</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>页面导航</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _blog_CocosCreatorDevWordle_wordle-3" data-v-e6f2a212><div><h1 id="cocos-creator实现wordle游戏-三" tabindex="-1">cocos creator实现wordle游戏（三） <a class="header-anchor" href="#cocos-creator实现wordle游戏-三" aria-label="Permalink to &quot;cocos creator实现wordle游戏（三）&quot;">​</a></h1><p>  接着上篇教程 微信小游戏实战--cocos creator实现wordle游戏（二）我们继续游戏界面的设计，准确的说上篇教程只是完成了游戏界面的基础设置，同时也介绍了节点创建的步骤。这篇教程才算是正式进入了游戏的界面设计。 先在“Canvas”节点下创建一个“home”空节点并且挂载widget组件，操作方式在上篇教程中已经介绍，这里不再累述。“home”空节点的高宽，widget配置和bg背景节点一样。</p><h2 id="布局分析" tabindex="-1">布局分析 <a class="header-anchor" href="#布局分析" aria-label="Permalink to &quot;布局分析&quot;">​</a></h2><p>  在最开始时，我将界面分解为3部分：顶部的用户头像，昵称显示区域。中间的单词输入区域。底部的键盘区域。对顶部区域做了适配顶端配置，顶部区域做了适配底部的配置，中间区域设置和顶部和底部边距，都是通过widget组件实现的。按照该设计思路，层级管理器中的结构如下：</p><p align="center"><img src="/blogimage/wordle/3/1.png"></p> home，top，midlle，bottom均为空节点并挂载widget组件，它们的widget配置如下： <ul><li>top: 宽720，高200（打算放两排组件，第一排是用户头像，第二排是其余功能按钮。一排100像素应该够了）</li></ul><p align="center"><img src="/blogimage/wordle/3/2.png"></p> 该配置可保证top始终会展示的屏幕的上方。 <ul><li>bottom:宽720，高400 （一个键盘按钮的高度设计为80，4行按钮差320，算上行间距400应该够了）</li></ul><p align="center"><img src="/blogimage/wordle/3/3.png"></p> 该配置可以保证bottom始终展示在屏幕的最下方。 设置好这些后，middle的widget组件会默认计算好上下边距： <p align="center"><img src="/blogimage/wordle/3/4.png"></p> 修改middle的高度，这两项边距也会发生对应的变化。 对于这款游戏来说，这样的设计思路有点问题。对于Iphone 5这种小屏幕的手机还比较适合，在iphone X,12这样的大屏幕下，顶部，底部和中间的距离就会被拉大，显的不那么紧凑不好看。最终我放弃了这个思路，把中间字母输入的控件和底部按钮控件全塞到了top中。最终如下所示： <p align="center"><img src="/blogimage/wordle/3/5.png"></p> top的高宽属性和widget的配置还是保持和上面的一致，这样界面基本上就可以适配绝大部分机型了，但是对于iphone 12这种刘海屏还是有点点问题，后面会在代码中做些处理。 <h2 id="用户头像-昵称布局" tabindex="-1">用户头像，昵称布局 <a class="header-anchor" href="#用户头像-昵称布局" aria-label="Permalink to &quot;用户头像，昵称布局&quot;">​</a></h2><p>在top节点下再创建一个空节点“head”和一个Label控件“name”，然后再在head空节点下创建两个精灵控件“headimage”，“headborder”。Label控件和精灵控件都在2D对象下。headimage用于显示用户的头像，name用于显示用户的昵称。层级管理器中结构如下：</p><p align="center"><img src="/blogimage/wordle/3/6.png"></p><p>之所以要将headimage嵌套在空节点head下是因为，Cococs Creator中精灵都是矩形的，而我们要实现的是一个圆圈，所以需要将headimage嵌套在head下，并且再增加一个headborder精灵给头像套一个圈圈。具体的设置步骤如下：</p><ul><li>head：高宽为100像素，添加一个MASK遮罩组件，设置遮罩类型为Ellipse椭圆，Segments 64</li></ul><p align="center"><img src="/blogimage/wordle/3/7.png"></p><p>通过这个配置就可以将head下的headimage精灵的四角遮住，并且呈圆角切割，看上去矩形的图像就被切割为圆形了，但是还是还能看出锯齿。所以headborder精灵就派上用场了，先通过图片处理软件生成一个100 X 100的圆圈图片，然后利用抠图软件将背景扣掉，剩下圆圈即可。还记得上篇教程介绍的资源管理器吗？生成好的图片就需要放在资源管理器中resources-&gt;Texture文件夹下，只需要在资源管理器中右键点击Texture文件夹，选择“在资源管理器中”打开这个文件夹了，然后将生成好的图片复制到该文件夹下即可，推荐使用这种方式，因为如果随着你的项目多了起来，每个项目下都有Textrue文件夹，你直接在电脑上去找的话，可能会找到别的项目下的这个文件夹。在Cocos Creator的资源管理器中打开文件夹就不会出现这种问题了。抠图软件网上很多，但是要收费的，这里给大家推荐一个免费的，而且是网页版的不需要安装，<a href="https://www.remove.bg/zh/upload" target="_blank" rel="noreferrer">点我</a>。这个游戏中用到的图片都很简单，用windows自带的画图软件就可以实现，具体步骤就不再介绍了，比较简单。</p><p>headimage和headborder的高宽都是 100，其他属性使用默认的即可，但要注意在层级管理器中顺序，headborder是在headimage下面，这样的话在显示的时候headborder会在headimage上面，这样才能显示出圆圈，当然你也可以在代码里面设置他们的层级来达到这个效果。</p><p>headboder中，设置图片为刚才制作好的圆圈图片，设置如下：</p><p align="center"><img src="/blogimage/wordle/3/8.png"></p> 资源管理器中，我已经将需要的图片全都制作好了，如下所示： <p align="center"><img src="/blogimage/wordle/3/9.png"></p> 你也可以直接左键选中“headborder”，拖拽到headborder的Sprite Frame属性中。这里还需要再介绍一下.plist文件，在游戏中可以将一类图片打包成plist文件，达到压缩游戏包大小的目的。同时，plist文件可以加载到精灵控件的 SptiteAtlas属性中，后续在代码里面可以很方便的实现图片切换。上图中的btn_keyborde，btn_middle就是plist文件，看字面意思你应该能猜到btn_keyborde就是键盘按钮上的一组图片，btn_middle就是中间字母输入区域，方块显示的背景图了。 <p align="center"><img src="/blogimage/wordle/3/10.png"></p> 点开plist文件就可以看到里面的图片，你也可以直接拖拽其中一个图片到精灵控件的Sprite Frame属性中实现图片的加载。制作plist文件需要用到 Textrue Packer这个软件[官网地址](https://www.codeandweb.com/texturepacker)，虽然是收费的，但是可以免费试用。操作很简单，将需要打包的图片拖拽进去，点击发布精灵表就可以了，唯一需要注意的就是，数据文件和纹理文件是配套的，都需要存放在Texture文件夹下： <p align="center"><img src="/blogimage/wordle/3/11.png"></p> 回到头像控件，到现在基本的设置已经完成了，在场景编辑器中就可以设置它的位置了。在层级管理器中左键点击head节点，在场景编辑器中可以看到如下画面： <p align="center"><img src="/blogimage/wordle/3/12.png"></p> 但是，我倾向于在属性检查器中来设置它的位置，因为这样更准确。设置它的位置有两种方式，第一种是通过设置Position属性来设置它的位置。第二种是通过widget组件。下面分别来说明这两种方式： <ul><li>通过Position属性：我们要实现的效果就是，头像显示在左上角，上边距5像素，左边距5像素。具体的属性设置如下</li></ul><p align="center"><img src="/blogimage/wordle/3/13.png"></p> 这里要先介绍一下锚点，锚点就是节点的原点位置，Position中的x，y的数值都需要根据锚点来计算，可以看到系统默认的锚点是0.5和0.5，表示锚点是位于节点的中间，如果设置为0和0，锚点就会移动到节点的左下方。Position的位置也是相对于父节点的，上图中head的Position设置为X:-305，Y:45。这个是怎么计算出来的呢？head的父节点是top，top的锚点属性也是0.5和0.5，处于top节点的中间位置。top的高度是200，宽度是720，也就是说从锚点向左移动 720 * 0.5 = 360 就到达了top的最左边，这里的到达最左边是指top的子节点head的锚点到达最左边，由于head的锚点处于head的中心，设置X:-360后，head的锚点左边部分就超出了top的范围，也就是只显示了一半。head的宽度是100，一半就是50，所以得再向右移动50才能显示完全，-360 + 50 = -310。由于我们要求左边距为5像素，所以再向右移动5像素 -310 + 5 = -305。同理，head 向上移动 200 * 0.5 = 100，锚点到达top的最上边，但是head锚点上半部分也就超出了top的范围，所以得再向下移动 100 * 0.5 = 50，同时上边距为5，还要再向下移动5，最后100 - 50 - 5 = 45。 <ul><li>通过widget组件： 在head节点上添加widget组件，设置如下：</li></ul><p align="center"><img src="/blogimage/wordle/3/14.png"></p> 可以看出，通过widget组件来设置节点的位置会更简单方便。但是为什么还需要通过锚点和父节点的高宽来计算子节点的位置呢？那是因为并不是所有控件都必须通过widget组件来布局并且如果widget过度使用的话，若果界面出现了布局问题很难查。我的理解是可以通过widget组件布局大体位置，就像最开始我们设计游戏界面分顶部，中间，底部三个部分时，可以通过widget组件将三个部分的位置布局好，然后顶部，中间，底部的内的控件可以通过Position来布局，这样更灵活。掌握这两种布局方法以后，基本上任何布局都可以在属性检查器中来操作，不需要在场景编辑器中用鼠标来拖拽。 <p>继续用户昵称 name（类型是Label）的设置，如下：</p><p align="center"><img src="/blogimage/wordle/3/15.png"></p> 主要用到的就是上图所示4个地方： <ul><li><p>字体颜色，设置为黑色也就是RGB（0,0,0）</p></li><li><p>清空默认自带的“Label”字符</p></li><li><p>字体大小，根据自己的喜好来设置</p></li><li><p>内容显示方式：有4种分别为none:效果就是内容超出Label宽度了就看不到超出部分。Clamp:内容超出Label宽度了会自动换行。Shrink:内容超出Label宽度后会自动缩小以完全显示。Resiz_height:内容超出Label宽度后自动换行，并配合EnableWrap属性自动调整高度。需要注意一下的是，刚创建的Label默认显示方式为none，这个时候是无法改变Label的大小的，这个坑了我好久才发现······</p></li></ul><p>宽度和高度就根据自己的喜好来设置了，我设置的是宽100高50.再根据刚才介绍的布局方法设置Position位置。最后在场景编辑器中的效果如下：</p><p align="center"><img src="/blogimage/wordle/3/16.png"></p><h2 id="功能按钮和答案提示区域布局" tabindex="-1">功能按钮和答案提示区域布局 <a class="header-anchor" href="#功能按钮和答案提示区域布局" aria-label="Permalink to &quot;功能按钮和答案提示区域布局&quot;">​</a></h2><p>在用户头像的下方，摆放一些功能按钮和答案提示区域，这里我们会用到Layout控件，右键点击top节点，选择“创建”--&gt;“UI组件”--&gt;“Layout（布局）”，命名为“Layout_top”，然后在Layout_top下“创建”--&gt;“UI组件”--&gt;“Button（按钮）”，依次创建“how”，“score”，“rank”，“btn_blank”，“btn_blank”5个按钮，层级管理器中显示结构如下:</p><p align="center"><img src="/blogimage/wordle/3/17.png"></p> how用来显示玩法介绍页面，score用来显示玩家得分页面，rank展示世界排名和好友排名，后面两个btn_blank暂时用来占位用的，后面如果注册用户数量达到了可以开通广告。虽然Cocos Creator中支持节点名称相同（它是通过uuid来区分节点的 ），但是建议不要将不同节点命名相同的名称。按钮的设置如下： <p align="center"><img src="/blogimage/wordle/3/18.png"></p> Layout_top设置如下： <p align="center"><img src="/blogimage/wordle/3/19.png"></p><ul><li>只需要设置高度60，和子节点的按钮高度一样。</li><li>设置显示方式为HORIZONTAL（水平）。</li><li>设置ResizeMode为CONTAINER（容器）</li><li>子节点的间距</li><li>设置排列方式为LEFT_TO_RIGHT从左至右</li></ul><p>做好如上配置后，Layout_top的大小会自动调整好宽度为320，子节点也会按照间距5像素，从左至右排列好。然后，在层级管理器中可以先鼠标左键点击head，然后按住Ctrl键，再鼠标左键点击Layout_top，再点击上方的左对齐按钮，可快速将Layout_top在水平位置设置为和head一样，最后再设置一下Y轴位置，可以按照前面介绍的根据Position位置设置，也可以拖动那个绿色的箭头来设置。如下所示：</p><p align="center"><img src="/blogimage/wordle/3/20.png"></p><p>接着再右键点击top节点，创建一个名为“Layout_topright”的Layout控件，设置如下：</p><p align="center"><img src="/blogimage/wordle/3/21.png"></p><ul><li>高度还是设置为60，因为它的子节点的高度也是60</li><li>展示方式还是水平。</li><li>ResizeMode设置为Container（容器）</li><li>左边距设置为5，保持和Layout_top有一定的间隙。</li><li>子节点排列方式还是从左到右。 在Layout_topright节点下，创建5个Button（按钮），名称规则为Layout_topright_ + index，按钮高宽均为60，设置好按钮图标，如下所示：</li></ul><p align="center"><img src="/blogimage/wordle/3/22.png"></p> 这里我们在按钮的SpriteAtlas属性中配置了一个plist文件，这个是为了后面在代码中方便切换按钮图标。这个设计的思路是，初始状态下，按钮的SpriteFrame加载的图片btn_top其实只是一个遮罩，罩住按钮节点下的Label，当玩家猜中某得字母时，我们就去掉该遮罩，用于显示按钮节点下的Label的内容，即正确答案。最后将Layout_topright位置配置好就行了，由于Layout_top节点的位置已经配置好，Layout_topright的位置就很好配置了，在Layout_topright的Position属性中，X设置为Layout_top的X值再加上320（Layout_top的宽度是320），Y设置为Layout_top的Y值即可。最终在场景编辑器中效果如下： <p align="center"><img src="/blogimage/wordle/3/23.png"></p><h2 id="中间字母输入区域布局" tabindex="-1">中间字母输入区域布局 <a class="header-anchor" href="#中间字母输入区域布局" aria-label="Permalink to &quot;中间字母输入区域布局&quot;">​</a></h2><p>游戏中字母输入区域就是一个5 X 6 的格子区域，如果只是单纯从布局上来说，完全可以利用一个Layout控件就可以实现，配置如下：</p><p align="center"><img src="/blogimage/wordle/3/24.png"></p><ul><li>设置显示模式为：GRID</li><li>ResizMode：Container（容器）</li><li>起始排列方式：HORIZONTAL（水平）</li><li>水平间距：5</li><li>纵向间距：5</li><li>纵向排列顺序：TOP_TO_BOTTOM（从上到下）</li><li>水平排列顺序：LEFT_TO_RIGHT</li><li>固定方式：FIXED_COL（列）</li><li>固定列数：5 这样的配置，在使用代码为Layout组件生成30个子节点时，就会按照从左到右，从上到下的顺序，一次生成并排列好30个子节点。但是，我没有采用这个设计思路，WTF？没采用还写出来干嘛？额，这里说点题外话，由于我一直坚信能够快速上手一门技术的最好方式就是去实践，去完成一个小而完整的例子。在实践过程中，会遇到很多问题，这些问题的产生也是验证自己对功能实现的设计，而写这个教程也是记录学习的过程。所以，虽然有些内容跟实现这个游戏无关，但是对于掌握一门技术，一个工具来说还是值得记录的。</li></ul><p>因为游戏的进程是一个单词一个单词的猜测，一排5个格子输入完成后，会步入下一排，所以前一排就必须锁定，让玩家不能再操作了。为了方便程序的控制，最终打算还是采用创建6个水平布局的Layout控件来实现。操作也很简单：</p><p>右键点击top节点，选择“创建”--&gt;“UI组件”--&gt;“Layout（布局）”，命名为“Layout_middle1”。配置如下：</p><p align="center"><img src="/blogimage/wordle/3/25.png"></p><ul><li>展示方式：HORIZONTAL（水平）</li><li>ResizMode：CONTAINER（容器）</li><li>左边距：10</li><li>右边距：10</li><li>子节点间距：10</li><li>排列方式：LEFT_TORIGHT（从左到右） 高度设置100，因为后续通过代码加载的子节点为边长100的正方形，宽度不用设置，设置ResiMode为CONTAINER后会自动匹配宽度。创建好后，默认位置在场景编辑器中处于水平中央，此时可以通过Ctrl + C，Ctrl + V的形式复制另外5个Layout出来，如上图所示。此时在场景编辑器中他们将会处在同一位置，只需要调整他们的Position即可，X不需要设置，因为已经在水平中央了，只需要根据父节点的高度和锚点计算各个Layout的Y值即可。最终如下图所示：</li></ul><p align="center"><img src="/blogimage/wordle/3/26.png"></p><h2 id="底部键盘按钮布局" tabindex="-1">底部键盘按钮布局 <a class="header-anchor" href="#底部键盘按钮布局" aria-label="Permalink to &quot;底部键盘按钮布局&quot;">​</a></h2><p>底部键盘按钮的布局方式同上，创建一个Layou命名为“Layot_bottom1”，设置如下：</p><p align="center"><img src="/blogimage/wordle/3/27.png"></p> 具体设置不再详述，和中间布局的Layout一样，只是高度变为了80，按钮设计为61 X 80的大小。同样也是再复制另外三个Layout出来。按照同样的方式设置好Position中的Y值，前面三个Layout_bottom放置26个字母按键，设计为通过代码动态加载。在最后一个Layout_bottom4中再创建3个Button（按钮）：“ENTER”，“SPACE”和“DEL”键，设置按钮大小，背景图片（方法在前面已经介绍过了就不再累述），在按钮节点下的Label设置按钮显示的名称，如下： <p align="center"><img src="/blogimage/wordle/3/28.png"></p> 如果一切顺利，在完成上述设置后，最终我们在场景编辑器中的样子是这样的： <p align="center"><img src="/blogimage/wordle/3/29.png"></p><h2 id="制作prefab" tabindex="-1">制作Prefab <a class="header-anchor" href="#制作prefab" aria-label="Permalink to &quot;制作Prefab&quot;">​</a></h2><p>这里先对Prefab做个简单介绍。Prefab也可以视为一个节点，在场景中，如果某一部分会被重复使用多次，就可以将该部分设计为一个Prefab，通过代码动态调用来达到简化页面设计的目的。在这个游戏中字母输入框就可以被设计为一个Prefab，如果Cocos Creator中Label控件可以设置边框的话，就不用这么麻烦了。由于Label控件不能设置边框，我们需要再添加一个精灵来实现一个带边框的Label，具体思路就是Label设计大小为 95 X 95，精灵设计大小为 100 X 100，Label显示在精灵上面，精灵的背景图为一个矩形方框图（需要扣掉背景），方框的线条宽度为5。这样就可以显示出一个边框为5像素的Label了。接下来我们就开始制作这个prefab:</p><ul><li>首先，我们在Layout_middle1 下创建一个空节点命名为“btn_middle”，大小设置100 X 100，然后在属性检查器中点击添加组件，添加一个Button组件，这个是为了后续实现点击事件。</li><li>然后，在该空节点下创建一个精灵和一个Label。精灵设置大小100 X 100，Label大小95 X 95。在层级管理器中，它们的结构如下：</li></ul><p align="center"><img src="/blogimage/wordle/3/30.png"></p> 精灵的设置： <p align="center"><img src="/blogimage/wordle/3/31.png"></p><ul><li>加载plist文件，方便在代码中控制背景图的切换。</li><li>设置初始状态的背景图。</li><li>通过添加组件按钮，添加一个UIOpacity组件，用于后续实现闪烁动画效果。</li></ul><p>Label的设置：</p><p align="center"><img src="/blogimage/wordle/3/32.png"></p><ul><li>设置字体颜色为黑色</li><li>清空默认的字符“Label”</li><li>字体大小设置为60</li><li>显示方式为SHRINK，默认为none，此时不能设置Label大小</li><li>加粗</li></ul><p>根据个人的喜好和页面美观要求可做不同的设置。</p><ul><li>完成以上设置以后，我们左键点击“btn_middle”节点，将它拖拽到下方资源管理器中resuorces--&gt;prefab文件夹中，就完成了一个prefab的创建。如下图所示，可以看到prefab是绿色的。</li></ul><p align="center"><img src="/blogimage/wordle/3/33.png"></p> 后续如果需要对prefab做修改，可以双击资源管理器中的prefab，进入prefab的编辑页面进行修改。 <ul><li>最后我们将Layout_middle1下的btn_middle删除掉，因为我们是通过代码来动态加载这个prefab就不需要在设计期出现了。</li><li>按照同样的方式制作键盘按钮的prefab，名称为btn_keyborde，制作方式一样就不再累述了。只是大小不一样而已。键盘按钮的大小设置为61 X 80</li></ul><h2 id="动态加载prefab" tabindex="-1">动态加载Prefab <a class="header-anchor" href="#动态加载prefab" aria-label="Permalink to &quot;动态加载Prefab&quot;">​</a></h2><p>创建脚本文件：右键点击资源管理器中scripts文件夹，选择“创建”--&gt;“脚本（Typescript）”，命名为home，之所以这样命名是为了和home节点保持一致。然后左键点击层级管理器中的home节点，将home脚本文件拖拽到home节点的属性检查器中，完成脚本文件的挂载，</p><p align="center"><img src="/blogimage/wordle/3/34.png"></p> 完成挂载以后，可在属性检查器里看到该脚本文件： <p align="center"><img src="/blogimage/wordle/3/35.png"></p> 如果你已在第一篇教程中完成了环境配置，那么在资源管理器中双击home脚本文件，即可在VS Code中打开。 创建gamemanager。所有代码都写在一个地方，显然不太合适。这里做一下简单的分工，home.ts脚本文件实现一些流程的控制和基本校验，具体的功能，如页面布局，动画显示，得分计算那些我们将它交给gamemanager来实现。以同样方式在scripts文件夹下创建一个gamemanager.ts脚本文件，在gamemanger脚本中我们实现一个gamemanager类来操作游戏相关逻辑，由于它将一个裁判的身份出现，所以设计为单例类。 代码如下： <div class="language-TypeScript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { _decorator, Component,tween,Sprite,ImageAsset, Node, Label,Button,Tween, instantiate,assetManager, UIOpacity, Vec3, Color, SpriteFrame } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cc&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> gamemanager</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // [1]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> homeNode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> _instance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> gamemanager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> get</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> instance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._instance) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._instance</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> gamemanager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._instance;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">aNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//初始化场景home节点</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        gamemanager.instance.homeNode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> aNode;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>在gamemanager中实现prefab的加载，代码如下：</p><div class="language-TypeScript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //添加prefab组件，layout组件上设置了布局,只需要添加到对应的layout下即可完成布局</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    addNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (prefab,parentNode,icount,keybordeArray) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> icount; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newNode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> instantiate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(prefab);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (keybordeArray) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                newNode.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keybordeArray[i];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                newNode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getChildByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Label&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Label).string </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keybordeArray[i];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                newNode.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parentNode.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;_&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();                     </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            parentNode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(newNode); </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>参数说明:</p><ul><li>prefab：要加载的prefab</li><li>parentNode：添加到哪个节点下，就是前面创建的Layout节点</li><li>icount：需要添加多少个prefab，字母如数区域一排添加5个，键盘按钮区域第一排10，第二排9个，第三排7个</li><li>keybordeArray：键盘按钮的显示内容如“A” 。 代码逻辑：使用instantiate函数将Prefab初始化为节点，如果keybordeArray不为null则说明是在键盘区域加载prefab，需要获取到键盘按钮节点下的Label控件，来显示对应的字母。最后在parentNode下添加该节点完成prefab的动态加载。 在gamemanager中实现，页面布局。代码如下：</li></ul><div class="language-TypeScript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    init_layout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (btn_iddle,btn_keyborde) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> homeNode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gamemanager.instance.homeNode;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //中间按钮布局</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> topnode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> homeNode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getChildByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;top&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> layoutnodename </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            layoutnodename </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Layout_middle&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> layoutnode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> topnode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getChildByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(layoutnodename);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            gamemanager.instance.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(btn_iddle,layoutnode,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //底部键盘布局</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> layout1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> topnode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getChildByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Layout_bottom1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> layout2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> topnode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getChildByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Layout_bottom2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> layout3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> topnode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getChildByName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Layout_bottom3&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keybordearray1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Q&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;W&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;E&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;R&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;T&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Y&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;U&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;I&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;O&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;P&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keybordearray2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;A&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;S&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;D&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;F&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;G&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;H&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;J&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;K&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;L&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keybordearray3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Z&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;X&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;C&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;V&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;B&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;N&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;M&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        gamemanager.instance.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(btn_keyborde,layout1,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,keybordearray1);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        gamemanager.instance.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(btn_keyborde,layout2,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,keybordearray2);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        gamemanager.instance.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(btn_keyborde,layout3,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,keybordearray3);      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>参数说明：</p><ul><li>btn_middle，btn_keborde分别为中间字母输入框和键盘按钮prefab 代码逻辑：根据home节点，通过Layout节点的名称获取到Layout控件的节点，在Layout节点下加载prefab 在home.ts脚本文件中，添加prefab属性，代码如下:</li></ul><div class="language-TypeScript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { _decorator, Component,Prefab,Button,Color,Label,Sprite, Widget, UITransform, VideoPlayer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cc&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { gamemanager } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./gamemanager&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ccclass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _decorator;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ccclass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;home&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> home</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({type : Prefab,visible : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> btn_middle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({type : Prefab,visible : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> btn_keyborde</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onEnable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>代码保存后 ，切换到Cocos Creator中，在home节点的属性检查器中就可以看到，prefab属性了</p><p align="center"><img src="/blogimage/wordle/3/36.png"></p> 此时，需要将btn_middle，btn_keyborde拖拽到对应的属性下，实现关联。在程序运行时，home节点初始化时便将prefab加载进来了。顺带再介绍一下onLoad，onEnable，start函数，脚本绑定到节点以后，节点在加载的时候，会顺序触发onLoad，onEnable，start函数，onLoad是在节点刚开始加载时触发，onEnale是在节点加载完毕后触发，此时节点下的内容对于用户来说还不可见，start是在节点加载完毕并且状态为active=true后，也就是玩家看到节点中的内容后触发。 <p>在home.ts脚本的onLoad调用gamemanager实现动态加载prefab完成布局。在onLoad中调用gamemanager的布局函数，实现布局。代码如下：</p><div class="language-TypeScript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">TypeScript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { _decorator, Component,Prefab,Button,Color,Label,Sprite, Widget, UITransform, VideoPlayer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cc&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { gamemanager } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./gamemanager&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ccclass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _decorator;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ccclass</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;home&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> home</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({type : Prefab,visible : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> btn_middle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({type : Prefab,visible : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> btn_keyborde</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //获取home节点</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        gamemanager.instance.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.node);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //初始化游戏界面</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        gamemanager.instance.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">init_layout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.btn_middle,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.btn_keyborde);           </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onEnable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>由于home.ts脚本文件挂载到了home节点下，在home.ts中，this.node即代表home节点，this.btn_middle，this.btn_keyborde是通过在Cocos Creator中关联加载的。完成这些代码后，运行程序，</p><p align="center"><img src="/blogimage/wordle/3/37.png"></p> 一切顺利的话，就可以在Chrome里面看到我们的游戏界面了： <p align="center"><img src="/blogimage/wordle/3/38.png"></p> 至此，游戏界面就算搭建完成了，接下来就继续实现相关功能了。</div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><div class="edit-info" data-v-1bcd8184><!----><div class="last-updated" data-v-1bcd8184><p class="VPLastUpdated" data-v-1bcd8184 data-v-1bb0c8a8>最后更新: <time datetime="2024-07-20T16:08:58.000Z" data-v-1bb0c8a8></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/blog/CocosCreatorDevWordle/wordle-2.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>上一页</span><span class="title" data-v-1bcd8184> cocos creator实现wordle游戏（二）</span><!--]--></a></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/blog/CocosCreatorDevWordle/wordle-4.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>下一页</span><span class="title" data-v-1bcd8184> cocos creator实现wordle游戏（四）</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-d8b57b2d data-v-566314d4><div class="container" data-v-566314d4><p class="message" data-v-566314d4>CSDN博主 大宝贱 的个人博客</p><p class="copyright" data-v-566314d4>Copyright © 2024-present Bling | Powered by Vitepress </p></div></footer><!--[--><!--]--></div></div>
    
    
  </body>
</html>